# 日報 2026/02/19

## 3行まとめ
1. 画像処理モジュール（グレースケール変換・二値化・輪郭検出）を実装した
2. 手書き画像で実験し、ガウシアンブラーがノイズ除去に有効だと確認した
3. 方眼紙の線の除去が難しく、AI活用を次回検討する

## 本日の作業内容

### 画像 → SVG変換の実装（セクション2）

#### 完了したタスク
- [x] OpenCVを使ったグレースケール変換の実装

#### 作成したファイル
- `src/image_processor.py` - 画像処理モジュール
  - `load_image()` - 画像読み込み
  - `to_grayscale()` - グレースケール変換
  - `save_image()` - 画像保存
  - `remove_colored_lines()` - 色付き線の除去（実験的）
  - `to_binary()` - 二値化
  - `find_contours()` - 輪郭検出
  - `simplify_contour()` - 輪郭簡略化
  - `get_largest_contour()` - 最大輪郭取得

- `test/test_image_processor.py` - テストコード

#### 実験・検証
`test/nuts.jpeg`（方眼紙に描いた手書きのピーナッツ）を使って検証

1. **グレースケール変換** → 成功
2. **ガウシアンブラー** → ノイズ除去に効果あり
3. **色除去（彩度フィルター）** → 方眼紙の線は彩度が低く効果薄い
4. **二値化** → 閾値150で手書き線が抽出できた
5. **輪郭検出** → 5749個の輪郭を検出、方眼紙の線も含まれる

#### 課題
- 方眼紙の線が二値化後も残る
- 単純な「最大輪郭」では方眼紙の外枠が選ばれてしまう
- **AIを使った線の除去を検討中**

## 次回のタスク
- [ ] AIまたは別手法で方眼紙の線を除去
- [ ] 輪郭検出の改善
- [ ] SVGファイル書き出し機能の実装
- [ ] テスト画像での動作確認

## 生成された中間ファイル（output/）
- `nuts_gray.jpeg` - グレースケール変換結果
- `1_no_blur.jpeg` - ぼかしなし
- `2_with_blur.jpeg` - ぼかしあり
- `3_binary_no_blur.jpeg` - ぼかしなしで二値化
- `4_binary_with_blur.jpeg` - ぼかしありで二値化
- `9_threshold_150.jpeg` - 閾値150で二値化
- `10_cleaned.jpeg` - モルフォロジー処理後
- `11_largest_contour.jpeg` - 最大輪郭（方眼紙の外枠）


